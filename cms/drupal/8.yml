import:
    - 'recipe/drupal8.php'
    - 'vendor/unleashedtech/deployer-recipes/db/backup/download.php'
    - 'vendor/unleashedtech/deployer-recipes/config.php'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/db/backup/create.php'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/db/backup/import.php'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/db/pull.yml'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/vars/vars.yml'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/post/deploy.yml'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/pre/deploy.yml'
    - 'vendor/unleashedtech/deployer-recipes/cms/drupal/tools/login.yml'
    - 'vendor/unleashedtech/deployer-recipes/releases/cleanup.php'

config:
    app_type: drupal
    drush: '{{bin}}/drush'
    sites:
        - 'default'
    shared_dir_names:
        - '{{app_directory_name}}/sites/{{site}}/files'
    shared_file_names:
        # See https://github.com/unleashedtech/dotenv-drupal
        - '.env'
    skip_db_update: false
    skip_cache_rebuild: false
    skip_config_import: false
    themes:
        - '{{app_directory_name}}/themes/custom/{{namespace}}_theme'
    writable_dir_names:
        - '{{app_directory_name}}/sites/{{site}}/files'

tasks:
    deploy:
        - cms:drupal:db:backup:create
        - cms:drupal:vars
        - deploy:prepare
        - cms:drupal:pre:deploy
        - deploy:symlink
        - cms:drupal:post:deploy
